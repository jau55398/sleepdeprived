{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\jau55\\\\git\\\\sleepdeprived\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\jau55\\\\git\\\\sleepdeprived\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import\"../../App.css\";import'../../Form.css';import{Link}from\"react-router-dom\";import Axios from'axios';import{useState}from'react';import{Col,Card,Row}from'antd';import Icon from'@ant-design/icons';import DefaultImage from'../../utils/DefaultImage';/*Currently contains the Search, Currency, logo,\r\nlog in, create account, cart, and calls all the buttons\r\nthat are in the AppButtons.js file*/var Meta=Card.Meta;function Shop(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),Skip=_useState4[0],setSkip=_useState4[1];var _useState5=useState(8),_useState6=_slicedToArray(_useState5,2),Limit=_useState6[0],setLimit=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),PostSize=_useState8[0],setPostSize=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),SearchTerms=_useState10[0],setSearchTerms=_useState10[1];var _useState11=useState({continents:[],price:[]}),_useState12=_slicedToArray(_useState11,2),Filters=_useState12[0],setFilters=_useState12[1];useEffect(function(){var variables={skip:Skip,limit:Limit};getProducts(variables);},[]);var getProducts=function getProducts(variables){Axios.post('/api/product/getProducts',variables).then(function(response){if(response.data.success){if(variables.loadMore){setProducts([].concat(_toConsumableArray(Products),_toConsumableArray(response.data.products)));}else{setProducts(response.data.products);}setPostSize(response.data.postSize);}else{alert('Failed to fetch data');}});};var renderCards=Products.map(function(product,index){return/*#__PURE__*/React.createElement(Col,{lg:6,md:8,xs:24},/*#__PURE__*/React.createElement(Card,{hoverable:true,cover:/*#__PURE__*/React.createElement(\"a\",{href:\"/product/\".concat(product._id)},/*#__PURE__*/React.createElement(DefaultImage,{images:product.images}))},/*#__PURE__*/React.createElement(Meta,{title:product.product_name,description:\"$\".concat(product.price)})));});var onLoadMore=function onLoadMore(){var skip=Skip+Limit;var variables={skip:skip,limit:Limit,loadMore:true,filters:Filters,searchTerm:SearchTerms};getProducts(variables);setSkip(skip);};return/*#__PURE__*/React.createElement(\"div\",{style:{width:'75%',margin:'3rem auto'}},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"h2\",null,\"  Products    \")),Products.length===0?/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',height:'300px',justifyContent:'center',alignItems:'center'}},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading\")):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},renderCards)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'center'}}));}export default Shop;","map":{"version":3,"sources":["C:/Users/jau55/git/sleepdeprived/client/src/components/views/ShopPage/Shop.js"],"names":["React","useEffect","Link","Axios","useState","Col","Card","Row","Icon","DefaultImage","Meta","Shop","Products","setProducts","Skip","setSkip","Limit","setLimit","PostSize","setPostSize","SearchTerms","setSearchTerms","continents","price","Filters","setFilters","variables","skip","limit","getProducts","post","then","response","data","success","loadMore","products","postSize","alert","renderCards","map","product","index","_id","images","product_name","onLoadMore","filters","searchTerm","width","margin","textAlign","length","display","height","justifyContent","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport \"../../App.css\";\r\nimport '../../Form.css';\r\nimport { Link } from \"react-router-dom\";\r\nimport Axios from 'axios';\r\nimport { useState } from 'react';\r\nimport { Col, Card, Row } from 'antd';\r\nimport Icon from '@ant-design/icons';\r\nimport DefaultImage from '../../utils/DefaultImage';\r\n\r\n\r\n/*Currently contains the Search, Currency, logo,\r\nlog in, create account, cart, and calls all the buttons\r\nthat are in the AppButtons.js file*/\r\nconst { Meta } = Card;\r\n\r\nfunction Shop() {\r\n\r\n  const [Products, setProducts] = useState([])\r\n  const [Skip, setSkip] = useState(0)\r\n  const [Limit, setLimit] = useState(8)\r\n  const [PostSize, setPostSize] = useState()\r\n  const [SearchTerms, setSearchTerms] = useState(\"\")\r\n  const [Filters, setFilters] = useState({\r\n    continents: [],\r\n    price: []\r\n  })\r\n  useEffect(() => {\r\n\r\n    const variables = {\r\n      skip: Skip,\r\n      limit: Limit,\r\n    }\r\n\r\n    getProducts(variables)\r\n\r\n  }, [])\r\n\r\n  const getProducts = (variables) => {\r\n    Axios.post('/api/product/getProducts', variables)\r\n      .then(response => {\r\n        if (response.data.success) {\r\n          if (variables.loadMore) {\r\n            setProducts([...Products, ...response.data.products])\r\n          } else {\r\n            setProducts(response.data.products)\r\n          }\r\n          setPostSize(response.data.postSize)\r\n        } else {\r\n          alert('Failed to fetch data')\r\n        }\r\n      })\r\n  }\r\n  \r\n\r\n  const renderCards = Products.map((product, index) => {\r\n\r\n    return <Col lg={6} md={8} xs={24}>\r\n      <Card\r\n        hoverable={true}\r\n        cover={<a href={`/product/${product._id}`}><DefaultImage images={product.images} /></a>}>\r\n\r\n        <Meta\r\n          title={product.product_name}\r\n          description={`$${product.price}`}\r\n        />\r\n      </Card>\r\n    </Col>\r\n  })\r\n  const onLoadMore = () => {\r\n    let skip = Skip + Limit;\r\n\r\n    const variables = {\r\n      skip: skip,\r\n      limit: Limit,\r\n      loadMore: true,\r\n      filters: Filters,\r\n      searchTerm: SearchTerms\r\n    }\r\n    getProducts(variables)\r\n    setSkip(skip)\r\n  }\r\n\r\n  return (\r\n    <div style={{ width: '75%', margin: '3rem auto' }}>\r\n      <div style={{ textAlign: 'center' }}>\r\n        <h2>  Products    </h2>\r\n      </div>\r\n\r\n\r\n\r\n      {Products.length === 0 ?\r\n        <div style={{ display: 'flex', height: '300px', justifyContent: 'center', alignItems: 'center' }}>\r\n          <h2>Loading</h2>\r\n        </div> :\r\n        <div>\r\n          <Row gutter={[16, 16]}>\r\n\r\n            {renderCards}\r\n\r\n          </Row>\r\n        </div>\r\n      }\r\n      <br />\r\n      <br />\r\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n        {/*<button onClick={onLoadMore}>Load More</button>*/}\r\n      </div>\r\n\r\n      {/*<Switch>\r\n            <Route path=\"/About\" component={About} />\r\n            <Route path=\"/item1\" component={Item1} />\r\n          </Switch>*/}\r\n      {/*IMPORTANT:\r\n          Dont need this or the <Router> brackets because Shop.js is inside App.js\r\n          If you want to add a new path, add it to the switch bracket in App.js*/}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Shop;\r\n"]},"metadata":{},"sourceType":"module"}